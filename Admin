import java.util.Scanner;
import java.util.StringTokenizer;
import java.io.*;
import java.util.*;

public class Admin extends User{
    private String adminName;
    private Food foodMenu;
    private Beverages beverageMenu;
    Scanner input = new Scanner(System.in);

    public Admin(int userID, String password, String adminName,Food foodMenu, Beverages beverageMenu){
        super(userID, password);
        this.adminName = adminName;
        this.foodMenu = foodMenu;
        this.beverageMenu = beverageMenu;
    }

    public String getAdminName(){
        return adminName;
    }

    public boolean adminLogin(){
        final int adminID = 123;
        final String adminPass = "admin";

        if (userID == adminID && password.equals(adminPass)){
            return true;
        }
        else{
            return false;
        }
    }

    //public disSales(){} tambah lepas order method ada
    //public disItemSold(){} tambah lepas order method ada

    public void updatePrice() {
        String choice;
        System.out.println(foodMenu.getFoodList());
        System.out.println(beverageMenu.getBeveList());

        do {
            System.out.println(foodMenu.getFoodList());
            System.out.println(beverageMenu.getBeveList());
            System.out.println("What would you like to do?");
            System.out.println("+------------------------------+");
            System.out.println("|  1  |   Update Items Price   |");
            System.out.println("+------------------------------+");
            System.out.println("|  2  |   Change Item Status   |");
            System.out.println("+------------------------------+");
            System.out.println("|  B  |   Back                 |");
            System.out.println("+------------------------------+");
            System.out.print("Enter option: ");
            choice = input.nextLine();

            if (choice.equals("1")) {
                System.out.print("Enter item code: ");
                String code = input.nextLine();

                try {
                    System.out.print("Enter new price: RM");
                    double nPrice = input.nextDouble();
                    input.nextLine();

                    switch (code.toUpperCase()) {
                        case "A": foodMenu.setAp(nPrice); break;
                        case "AT": foodMenu.setATp(nPrice); break;
                        case "ATC": foodMenu.setATCp(nPrice); break;
                        case "D": foodMenu.setDp(nPrice); break;
                        case "DT": foodMenu.setDTp(nPrice); break;
                        case "DTC": foodMenu.setDTCp(nPrice); break;
                        case "B": foodMenu.setBp(nPrice); break;
                        case "C": foodMenu.setCp(nPrice); break;
                        case "WJ": beverageMenu.setWJp(nPrice); break;
                        case "HJ": beverageMenu.setHJp(nPrice); break;
                        case "LTH": beverageMenu.setLThp(nPrice); break;
                        case "LTC": beverageMenu.setLTcp(nPrice); break;
                        case "TCH": beverageMenu.setTChp(nPrice); break;
                        case "TCC": beverageMenu.setTCcp(nPrice); break;
                        default:
                            System.out.println("Invalid code. Please enter a valid menu item code.");
                            continue;
                    }

                    System.out.println("Price Updated Successfully!");

                } catch (InputMismatchException e) {
                    System.out.println("Invalid price input. Please enter a valid number.");
                    input.nextLine();
                }

            } else if (choice.equals("2")) {
                System.out.println("ini update status");
                System.out.print("Enter item code to toggle status: ");
                String code = input.nextLine().toUpperCase();

                switch (code) {
                        // Food
                    case "A":
                        foodMenu.setApCheck(!foodMenu.isApCheck()); break;
                    case "AT":
                        foodMenu.setATpCheck(!foodMenu.isATpCheck()); break;
                    case "ATC":
                        foodMenu.setATCpCheck(!foodMenu.isATCpCheck()); break;
                    case "D":
                        foodMenu.setDpCheck(!foodMenu.isDpCheck()); break;
                    case "DT":
                        foodMenu.setDTpCheck(!foodMenu.isDTpCheck()); break;
                    case "DTC":
                        foodMenu.setDTCpCheck(!foodMenu.isDTCpCheck()); break;
                    case "C":
                        foodMenu.setCpCheck(!foodMenu.isCpCheck()); break;
                    case "B":
                        foodMenu.setBpCheck(!foodMenu.isBpCheck()); break;

                        // Beverages
                    case "WJ":
                        beverageMenu.setWJcheck(!beverageMenu.isWJcheck()); break;
                    case "HJ":
                        beverageMenu.setHJcheck(!beverageMenu.isHJcheck()); break;
                    case "TCH":
                        beverageMenu.setTChcheck(!beverageMenu.isTChcheck()); break;
                    case "TCC":
                        beverageMenu.setTCccheck(!beverageMenu.isTCccheck()); break;
                    case "LTH":
                        beverageMenu.setLThcheck(!beverageMenu.isLThcheck()); break;
                    case "LTC":
                        beverageMenu.setLTccheck(!beverageMenu.isLTccheck()); break;

                    default:
                        System.out.println("Invalid code. Please enter a valid menu item code.");
                        continue;
                }

                System.out.println("Item availability status updated successfully!");

            } else if (!choice.equalsIgnoreCase("B")) {
                System.out.println("Invalid input. Please try again.");
            }

        } while (!choice.equalsIgnoreCase("B"));
    }

    public static void disTotalCustomer(){
        try {
            BufferedReader br = new BufferedReader(new FileReader("Customer.txt"));
            String line;

            System.out.println("+------------+----------------------+-------------+");
            System.out.println("|  User ID   |     Customer Name    |   Type      |");
            System.out.println("+------------+----------------------+-------------+");

            while ((line = br.readLine()) != null) {
                StringTokenizer st = new StringTokenizer(line, ",");
                int userID = Integer.parseInt(st.nextToken());
                st.nextToken(); // skip password
                String name = st.nextToken();
                boolean isMember = Boolean.parseBoolean(st.nextToken());

                String type = isMember ? "Member" : "Regular";
                System.out.printf("| %-10d | %-20s | %-11s |\n", userID, name, type);
            }

            System.out.println("+------------+----------------------+-------------+");
            br.close();
        } catch (IOException e) {
            System.out.println("Error reading from file: " + e.getMessage());
        }
    }
}
